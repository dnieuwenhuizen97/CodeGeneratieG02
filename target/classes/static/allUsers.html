<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>All Users</title>
</head>
<body>
<div class="navbar">
    <a href="http://localhost:8080/login.html">Login</a>
    <a href="http://localhost:8080/machine.html">Machine</a>
    <a href="http://localhost:8080/index.html">Home</a>
    <a href="http://localhost:8080/signUp.html">SignUp</a>
    <a href="http://localhost:8080/allUsers.html">Show Users</a>
    <a href="http://localhost:8080/updateUser.html">Update User</a>
</div>

<div>
    <br>
    <input type="button" id="GetAll" value="Show All Users" onclick="GetAllUsers()">
    <br>
</div>

<form id="searchById">
    <br>
    <label>Search By ID: </label> <input name="user_id"><br>
    <br />
    <input type="button" id="getById" value="Search" onclick="GETUserById()">
</form>

<p id="test">
    <br>
</p>


<script>
    function GetAllUsers() {

       var xhr =  new XMLHttpRequest();
        xhr.open('GET','http://localhost:8080/users');
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.setRequestHeader("ApiKeyAuth", sessionStorage.getItem("AuthToken"));
        xhr.onload= (e) => {
            alert(xhr.status);
            return xhr.responseText;
        }

    function GETUserById() {
        var xhr =  new XMLHttpRequest();
            xhr.open('GET','http://localhost:8080/users/'+document.forms["searchById"]["user_id"].value, true);
            xhr.setRequestHeader("Content-Type", "application/json" );
            xhr.setRequestHeader("ApiKeyAuth" ,sessionStorage.getItem("AuthToken"));
            xhr.send();
            xhr.onload= (e) => {
                alert(xhr.status);
            }
    }
</script>

</body>
</html>